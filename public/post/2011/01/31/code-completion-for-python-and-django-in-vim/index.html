<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>code completion for python and django in vim :: belchak.com — A blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="VIM has been my editor of choice for at least 15 years. I love how fast I can edit files, perform menial tasks, and wreak general havoc on any code project I am working on at any given moment. One of the things that I have missed about VIM from an IDE perspective has been code completion (a.k.a. &amp;ldquo;IntelliSense&amp;rdquo;). I have spent a lot of time on websites and man pages trying to figure out syntax and function names for several types of languages, and just recently discovered a long-included feature of VIM called omni completion, or Omnicomplete."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://belchak.com/post/2011/01/31/code-completion-for-python-and-django-in-vim/" />


<link rel="stylesheet" href="https://belchak.com/assets/style.css">

  <link rel="stylesheet" href="https://belchak.com/assets/blue.css">



<link rel="stylesheet" href="https://belchak.com/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://belchak.com/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="https://belchak.com/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="code completion for python and django in vim :: belchak.com — A blog" />
<meta name="twitter:description" content="VIM has been my editor of choice for at least 15 years. I love how fast I can edit files, perform menial tasks, and wreak general havoc on any code project I am working on at any given moment. One of the things that I have missed about VIM from an IDE perspective has been code completion (a.k.a. &amp;ldquo;IntelliSense&amp;rdquo;). I have spent a lot of time on websites and man pages trying to figure out syntax and function names for several types of languages, and just recently discovered a long-included feature of VIM called omni completion, or Omnicomplete." />
<meta name="twitter:site" content="https://belchak.com/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="code completion for python and django in vim :: belchak.com — A blog">
<meta property="og:description" content="VIM has been my editor of choice for at least 15 years. I love how fast I can edit files, perform menial tasks, and wreak general havoc on any code project I am working on at any given moment. One of the things that I have missed about VIM from an IDE perspective has been code completion (a.k.a. &amp;ldquo;IntelliSense&amp;rdquo;). I have spent a lot of time on websites and man pages trying to figure out syntax and function names for several types of languages, and just recently discovered a long-included feature of VIM called omni completion, or Omnicomplete." />
<meta property="og:url" content="https://belchak.com/post/2011/01/31/code-completion-for-python-and-django-in-vim/" />
<meta property="og:site_name" content="code completion for python and django in vim" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:section" content="django" /><meta property="article:section" content="python" /><meta property="article:section" content="Technology" /><meta property="article:section" content="vim" />
<meta property="article:published_time" content="2011-01-31 00:00:00 &#43;0000 UTC" />







</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    belchak.com
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/post">Posts</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/post">Posts</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
  <div class="post">
    <h1 class="post-title"><a href="https://belchak.com/post/2011/01/31/code-completion-for-python-and-django-in-vim/">code completion for python and django in vim</a></h1>
    <div class="post-meta">
      <span class="post-date">
        2011-01-31
      </span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="https://belchak.com/tags/django/">django</a>&nbsp;
        
          #<a href="https://belchak.com/tags/python/">python</a>&nbsp;
        
          #<a href="https://belchak.com/tags/vim/">vim</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p><a href="http://www.vim.org/">VIM</a> has been my editor of choice for at least 15 years. I love how fast I can edit files, perform menial tasks, and wreak general havoc on any code project I am working on at any given moment. One of the things that I have missed about VIM from an IDE perspective has been code completion (a.k.a. &ldquo;IntelliSense&rdquo;). I have spent a lot of time on websites and man pages trying to figure out syntax and function names for several types of languages, and just recently discovered a long-included feature of VIM called omni completion, or Omnicomplete.</p>

<p>Since my life is mostly centered around <a href="http://www.djangoproject.com">django</a> these days, I will discuss how I&rsquo;ve benefited from omnicomplete and how I&rsquo;ve set it up in my own environment.</p>

<p>First, since django is a web development framework, I want to make sure that I can get omnicompletion for HTML, Python, JavaScript and CSS. Omnicompletion works for almost any programming language that VIM has syntax highlighting support for, and these languages are no exception.</p>

<p>Here&rsquo;s what omnicomplete looks like for CSS files, for example:</p>

<p><img src="http://www.belchak.com/wp-content/uploads/2011/01/Screen-shot-2011-01-30-at-3.37.00-PM-1-30-11-300x213.png" alt="screenshot" /></p>

<p>Setting this up for your django project is simple as pie. It is helpful to have all your django projects in one parent directory for the following setup. You can obviously customize this to your needs, but this is the way I&rsquo;ve set it up in my environment.</p>

<p>Add the following to a script in a directory of your choosing (~/bin/vim_wrapper is where mine is):</p>

<pre><code class="language-bash">#!/bin/bash
export PROJECT=`python -c &quot;import os; print os.path.basename(os.getcwd())&quot;`
export PYTHONPATH=&quot;/path/to/your/projects/parent/directory/&quot;
export DJANGO_SETTINGS_MODULE=$PROJECT.settings vim
$@
</code></pre>

<p>Then add the following line to your ~/.bash_profile or equivalent:</p>

<p><code>alias vi=&quot;vim_wrapper&quot;</code></p>

<p>Or, you can call your vim_wrapper script by hand. (<code>vim_wrapper file_to_edit.py</code>)</p>

<p>Next, add the following lines to your ~/.vimrc file:</p>

<pre><code class="language-vim">filetype plugin on
autocmd FileType python set omnifunc=pythoncomplete#Complete
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
autocmd FileType css set omnifunc=csscomplete#CompleteCSS
</code></pre>

<p>I also prefer to re-map the default key binding (<C-x><C-o>) to <C-space>, so I accomplish this by also adding the following line to my ~/.vimrc file: <code>inoremap &lt;C-space&gt; &lt;C-x&gt;&lt;C-o&gt;</code></p>

<p>I also found <a href="http://blogs.gnome.org/lharris/2008/07/20/code-completion-with-vim-7/">this trick</a> today while searching around&hellip;</p>

<blockquote>
<p>What this function does is that if there is no completion that could happen it will insert a tab.  Otherwise it checks to see if there is an omnifunction available and, if so, uses it. Otherwise it falls back to Dictionary completion if there is a dictionary defined.  Finally it resorts to simple known word completion.  In general, hitting the Tab key will just do the right thing for you in any given situation.</p>
</blockquote>

<p>Add the following to your ~/.vimrc and you should be good to go. It works like a charm for me.</p>

<pre><code class="language-vim">function! SuperCleverTab()
    if strpart(getline('.'), 0, col('.') - 1) =~ '^\s*$'
        return &quot;\&quot;
    else
        if &amp;omnifunc != ''
            return &quot;\\&quot;
        elseif &amp;dictionary != ''
            return &quot;\&quot;
        else
            return &quot;\&quot;
        endif
    endif
endfunction

inoremap &lt;Tab&gt; &lt;C-R&gt;=SuperCleverTab()&lt;cr&gt;
</code></pre>

<p>If you find yourself writing code in other languages, the following lines in your vimrc should be adequate:</p>

<pre><code class="language-vim">filetype plugin on
set ofu=syntaxcomplete#Complete
</code></pre>

<p>You can now test that your installation works by changing directories to one of your django projects, firing up vim and running the following command: <code>:python from django import db</code></p>

<p>If you do not get a horrible error, you are good to go!</p>

<p>You can now access code completion by the following methods:</p>

<ul>
<li><p><code>&lt;C-p&gt;</code> - Shows a list of all local symbols. This is good if you do not have a tags file associated with the file you are editing.</p></li>

<li><p><code>&lt;C-space&gt;</code> - Shows a list of all available symbols. You need to set up a tags file, which is outside the scope of this blog post</p></li>

<li><p><code>&lt;C-x&gt;&lt;C-o&gt;</code> - The original keystroke sequence that we re-mapped C-space to.</p></li>

<li><p><code>&lt;Tab&gt;</code> - The all-powerful tab!`</p></li>
</ul>

<p>I hope you enjoy your new-found power with vim as much as I do!</p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://belchak.com/post/2011/02/05/unit-testing-your-django-application/">
                <span class="button__icon">←</span>
                <span class="button__text">unit testing your django application</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://belchak.com/post/2011/01/27/django-database-migrations-with-south/">
                <span class="button__text">django database migrations with south</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://belchak.com/assets/main.js"></script>
<script src="https://belchak.com/assets/prism.js"></script>

  
</div>

</body>
</html>
