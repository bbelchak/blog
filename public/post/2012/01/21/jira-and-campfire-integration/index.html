<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>jira and campfire integration :: belchak.com — A blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="I have been working on migrating my company&amp;rsquo;s Pivotal Tracker to JIRA. We love most of the features of JIRA, but we were really missing the nice updates to our Campfire room to tell us what is going on with our issues.
Sure, we could use an RSS feed plugin for Campy, but that is not real-time enough.
I didn&amp;rsquo;t want to write a huge plugin just to send messages to Campfire (it seems like such a simple thing to do!"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://belchak.com/post/2012/01/21/jira-and-campfire-integration/" />


<link rel="stylesheet" href="https://belchak.com/assets/style.css">

  <link rel="stylesheet" href="https://belchak.com/assets/blue.css">



<link rel="stylesheet" href="https://belchak.com/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://belchak.com/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="https://belchak.com/img/favicon/blue.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="jira and campfire integration :: belchak.com — A blog" />
<meta name="twitter:description" content="I have been working on migrating my company&amp;rsquo;s Pivotal Tracker to JIRA. We love most of the features of JIRA, but we were really missing the nice updates to our Campfire room to tell us what is going on with our issues.
Sure, we could use an RSS feed plugin for Campy, but that is not real-time enough.
I didn&amp;rsquo;t want to write a huge plugin just to send messages to Campfire (it seems like such a simple thing to do!" />
<meta name="twitter:site" content="https://belchak.com/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="jira and campfire integration :: belchak.com — A blog">
<meta property="og:description" content="I have been working on migrating my company&amp;rsquo;s Pivotal Tracker to JIRA. We love most of the features of JIRA, but we were really missing the nice updates to our Campfire room to tell us what is going on with our issues.
Sure, we could use an RSS feed plugin for Campy, but that is not real-time enough.
I didn&amp;rsquo;t want to write a huge plugin just to send messages to Campfire (it seems like such a simple thing to do!" />
<meta property="og:url" content="https://belchak.com/post/2012/01/21/jira-and-campfire-integration/" />
<meta property="og:site_name" content="jira and campfire integration" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:section" content="JIRA" /><meta property="article:section" content="Technology" />
<meta property="article:published_time" content="2012-01-21 00:00:00 &#43;0000 UTC" />







</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    belchak.com
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/post">Posts</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/post">Posts</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
  <div class="post">
    <h1 class="post-title"><a href="https://belchak.com/post/2012/01/21/jira-and-campfire-integration/">jira and campfire integration</a></h1>
    <div class="post-meta">
      <span class="post-date">
        2012-01-21
      </span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="https://belchak.com/tags/campfire/">campfire</a>&nbsp;
        
          #<a href="https://belchak.com/tags/groovy/">groovy</a>&nbsp;
        
          #<a href="https://belchak.com/tags/jira/">jira</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p>I have been working on migrating my company&rsquo;s Pivotal Tracker to JIRA. We love most of the features of JIRA, but we were really missing the nice updates to our Campfire room to tell us what is going on with our issues.</p>

<p>Sure, we could use an RSS feed plugin for <a href="http://www.belchak.com/2011/06/24/campy-the-python-campfire-bot/">Campy</a>, but that is not real-time enough.</p>

<p>I didn&rsquo;t want to write a huge plugin just to send messages to Campfire (it seems like such a simple thing to do!). I was poking around for solutions, and came across <a href="https://studio.plugins.atlassian.com/wiki/display/GRV/Script+Runner">this plugin</a>. It&rsquo;s a plugin that runs scripts written in the <a href="http://groovy.codehaus.org/">Groovy</a> dynamic language for Java. One nice thing about this plugin is that it lets you execute Python (Jython) or Ruby (Jruby). The only problem is that you can&rsquo;t write a listener using Python, so I ended up having to learn Groovy.</p>

<p>Here&rsquo;s what I came up with. It requires you to install the <a href="http://groovy.codehaus.org/modules/http-builder/doc/index.html">HTTPBuilder</a> libraries for Groovy, and this script will require some customization to fit your environment. Right now it only supports sending messages when new issues are created and when a new comment is added to an existing issue, but other issue events would be easy enough to add - this is meant as an example.</p>

<pre><code class="language-groovy">    import com.atlassian.jira.event.issue.AbstractIssueEventListener
    import com.atlassian.jira.event.issue.IssueEvent
    import com.atlassian.jira.ComponentManager
    import org.apache.log4j.Category
    import groovyx.net.http.RESTClient
    import static groovyx.net.http.ContentType.JSON
    import static com.atlassian.jira.event.type.EventType.*

    class CampfireListener extends AbstractIssueEventListener {

        @Override
        void workflowEvent(IssueEvent event) {
            def Category log = Category.getInstance(&quot;com.onresolve.jira.groovy.PostFunction&quot;)
            def campfire = new RESTClient('https://CAMPFIREID.campfirenow.com/room/ROOMID/')
            def issueBaseUrl = &quot;http://yourjirahost:8080/path-to-jira/browse/&quot;
            campfire.auth.basic 'CAMPFIRE AUTH TOKEN', 'X'
            switch (event.getEventTypeId()) {
                case ISSUE_COMMENTED_ID:
                    def resp = campfire.post( path: 'speak.json',
                                          body: [ message: [ type: &quot;TextMessage&quot;, body:
                                              String.format(&quot;%s added a comment to %s (%s%s):&quot;,
                                                  event.getUser().getDisplayName(),
                                                  event.issue.getKey(),
                                                  issueBaseUrl,
                                                  event.issue.getKey())] ],
                                          requestContentType: JSON)
                    resp = campfire.post( path: 'speak.json',
                                          body: [ message: [ type: &quot;PasteMessage&quot;, body:
                                              String.format(&quot;%s&quot;, event.getComment().getBody()) ] ],
                                          requestContentType: JSON)
                    break
                case ISSUE_CREATED_ID:
                    def resp = campfire.post( path: 'speak.json',
                            body: [ message: [ type: &quot;TextMessage&quot;, body:
                                String.format('%s created a new issue: &quot;%s&quot; (%s%s):',
                                    event.getUser().getDisplayName(),
                                    event.issue.getSummary(),
                                    issueBaseUrl,
                                    event.issue.getKey()) ] ],
                            requestContentType: JSON)
                    resp = campfire.post( path: 'speak.json',
                          body: [ message: [ type: &quot;PasteMessage&quot;, body:
                              String.format(&quot;%s&quot;, event.getIssue().getDescription()) ] ],
                          requestContentType: JSON)
                    break
            }
        }
    }
</code></pre>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://belchak.com/post/2012/07/31/migrating-from-wordpress-to-octopress/">
                <span class="button__icon">←</span>
                <span class="button__text">migrating from wordpress to octopress</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://belchak.com/post/2011/07/27/problems-with-ipv46-hosts-in-osx-lion/">
                <span class="button__text">problems with ipv46 hosts in osx lion</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://belchak.com/assets/main.js"></script>
<script src="https://belchak.com/assets/prism.js"></script>

  
</div>

</body>
</html>
